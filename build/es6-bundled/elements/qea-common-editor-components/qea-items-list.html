<html><head><link rel="import" href="../../bower_components/polymer/polymer.html"><link rel="import" href="../../bower_components/iron-icons/communication-icons.html"><link rel="import" href="../../scripts/Sortable.html"><link rel="import" href="../../bower_components/paper-input/paper-input.html"><link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html"><link rel="import" href="../../bower_components/iron-icons/iron-icons.html"></head><body><dom-module id="qea-items-list"><template><style>:host{display:block;}.optionItem{padding-left:20px;display:flex;align-items:center;}.icons{color:grey;opacity:0.6;}.move:hover{color:black;}.remove:hover{color:red;}.addItem{opacity:0.6;}</style><sortable-js id="sortableJs" handle=".handle" scroll="" animation="200" force-fallback="true" on-end="_itemMoved"><template is="dom-repeat" items="{{_optionsList}}"><div class="optionItem"><paper-input value="{{item.label}}" no-label-float="" on-change="_itemUpdated"></paper-input><template is="dom-if" if="[[sortable]]"><paper-icon-button class="move icons handle" icon="communication:import-export"></paper-icon-button></template><paper-icon-button class="remove icons" icon="clear" on-tap="_itemRemoved"></paper-icon-button></div></template></sortable-js><div class="optionItem addItem"><paper-input id="addInput" label="[[newItemLabel]]" on-change="_addItem"></paper-input><paper-icon-button id="addIcon" icon="add" on-tap="_addItem"></paper-icon-button></div></template><script>(function(){'use strict';Polymer({is:'qea-items-list',properties:{_counterId:{type:Number,value:0},_optionsList:{type:Array,value:()=>[]},newItemLabel:{type:String,value:'Add an item'},sortable:{type:Boolean,value:!1},value:{type:Array,value:()=>[],notify:!0},restore:{type:Array,observer:'_restoreState'}},_addItem:function(a,b){let c=b&&void 0!==b.label?b.label:this.$.addInput.value;c&&(this.push('_optionsList',{id:this._counterId,label:c}),this.push('value',{id:this._counterId++,label:c}),this.$.addInput.value='')},_itemMoved:function(a){if(a.oldIndex!==void 0&&a.newIndex!==void 0){const b=this._optionsList[a.newIndex];this.splice('value',a.oldIndex,1),this.splice('value',a.newIndex,0,b)}},_itemRemoved:function(a){this.splice('_optionsList',a.model.index,1);let b;for(b=0;b<this.value.length&&!(this.value[b].id===a.model.item.id);b++);this.splice('value',b,1)},_restoreState:function(){for(const a of this.restore)this._addItem(null,a)},_itemUpdated:function(a){this.splice('_optionsList',a.model.index,1,{id:a.model.item.id,label:a.model.item.label});let b;for(b=0;b<this.value.length&&!(this.value[b].id===a.model.item.id);b++);this.splice('value',b,1,{id:a.model.item.id,label:a.model.item.label})}})})();</script></dom-module></body></html>