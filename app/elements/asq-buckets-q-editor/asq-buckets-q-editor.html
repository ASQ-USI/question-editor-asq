<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../../bower_components/qea-property-editor/qea-property-editor-repeater.html">
<link rel="import" href="../../../bower_components/asq-buckets-q/asq-buckets-q.html">
<link rel="import" href="../../../bower_components/qea-property-editor/qea-property-editor.html">
<link rel="import" href="../../../bower_components/asq-stem/asq-stem.html">
<link rel="import" href="../../../bower_components/qea-property-editor/qea-advanced-editors.html">
<link rel="import" href="../../../bower_components/asq-solution/asq-solution.html">
<link rel="import" href="../qea-common-editor-components/qea-items-list.html">
<link rel="import" href="../qea-common-editor-components/qea-three-column-layout.html">
<link rel="import" href="../qea-common-editor-components/qea-three-column-layout.html">
<link rel="import" href="../qea-common-editor-components/qea-editors-behavior.html">

<dom-module id="asq-buckets-q-editor">
  <template>
    <style include="iron-flex"></style>
    <style include="qea-three-column-layout">
      :host {
      }
      div[labels], div[buckets]{
        @apply(--layout-horizontal);
        @apply(--layout-center-justified);
        @apply(--layout-wrap);
      }
      div[buckets]>div{
        @apply(--layout-vertical);
        min-width: 150px;
        min-height: 150px;
        border: 1px solid gray;
        margin: 1px;
        text-align: center;
        border-radius: 5px;
      }

      div[labels]> div{
        margin: 2px;
        padding: 8px;
        border: 1px solid grey;
        border-radius: 5px;
      }

      div.label.dragging {
        opacity: 0.6;
      }

    </style>

    <!-- leftPanel -->
    <div id="leftPanel">
      <qea-advanced-editors></qea-advanced-editors>
      <!-- title property-->
      <qea-property-editor
        name="title"
        label="Stem"
        type="string"
        widget-type="text-code"
        default="Title"
        value="{{qTitleVal}}">
      </qea-property-editor>

      <div class="sectionTitle">
        bucket list
      </div>
      <qea-items-list
        new-Item-Label="Insert new buckets"
        sortable
        restore="[[_bucketsListRestore]]"
        value="{{_bucketsListValue}}">
      </qea-items-list>

      <div class="sectionTitle">
        label list
      </div>
      <qea-items-list
        new-Item-Label="Insert new labels"
        restore="[[_labelsListValueRestore]]"
        value="{{_labelsListValue}}">
      </qea-items-list>


      <div class="sectionTitle">
        Question properties
      </div>
      <!-- list of question properties -->
      <qea-property-editor-repeater id="qeaRepeatValues"
        property-Array=[[questionProps]]
        values={{qeaRepeatValues}}
        is-Advanced-User=[[viewAdvanced]]>
      </qea-property-editor-repeater>

      <div id="advanced" on-tap="_showAdvanced">
        show all
      </div>
    </div>

    <div id="mainArea">
      <asq-buckets-q role="viewer"
        disabled="[[qeaRepeatValues.disabled]]"
        mode="[[qeaRepeatValues.mode]]"
        attr-for-matched="[[qeaRepeatValues.attrForMatched]]"
        x-matchable="div[buckets]"
        y-matchable="div[labels]">
        <asq-stem><span inner-H-T-M-L="[[qTitleVal]]"></span></asq-stem>

        <div buckets >
          <div s-name="test" bucket><b>test</b></div>
          <template is="dom-repeat" items="[[_bucketsListValue]]">
            <div s-name="[[item.label]]" bucket><b>[[item.label]]</b></div>
          </template>
        </div>

        <div labels >
          <div s-name="testLabel" label class="label-primary">testLabel</div>
          <template is="dom-repeat" items="[[_labelsListValue]]">
            <div s-name="[[item.label]]" label class="label-primary">[[item.label]]</div>
          </template>
        </div>

        <asq-solution hidden>[[questionSolution]]</asq-solution>
      </asq-buckets-q>
    </div>

    <!-- Right Panel -->
    <div id="rightPanel">

    </div>

  </template>
  <script>
  (function () {
    'use strict';
    const questionProperties = [
      {
        name: 'disabled',
        label: 'drag & drop disabled',
        type: 'boolean', // < Boolean | Number | String | Enum  >
        description: 'disable the ability to drag labels',
        default: 'false',
      },
      {
        name: 'mode',
        label: 'Sets relationship',
        type: 'string', // < Boolean | Number | String | Enum  >
        description: `The mode is to define the relationship between two sets.
                      It can be 1-1, m-m, a-m, m-b or a-b. a and b are any
                      postive integer number.`,
        default: 'm-m',
        isAdvancedProperty: 'false;',
      },
      {
        name: 'attrForMatched',
        type: 'string', // < Boolean | Number | String | Enum  >
        description: 'The attribute value of an element for matched.',
        default: 's-name',
        isAdvancedProperty: 'true',
      },
    ];
    class asqBucketsQEditor {

      get behaviors() {
        return [qeaBehaviors.generalEditorsBehavior];
      }

      beforeRegister() {
        this.is = 'asq-buckets-q-editor';
        this.properties = {
          questionProps: {
            type: Array,
            value: questionProperties,
          },
          _bucketsListValue: {
            type: Array,
            value: () => [],
          },
          _labelsListValue: {
            type: Array,
            value: () => [],
          },
        };
      }

      // function here

    }

    Polymer(asqBucketsQEditor);
  })();
  </script>
</dom-module>
